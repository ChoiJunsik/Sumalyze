{% extends "sumalyze/layout.html" %}

{% block before-body %}
    <style>
        .question-part{
            padding: 20px;
        }
        .title-txt {
            position: relative;
            font-size: 23px;
            margin-top: 10px;
            margin-bottom: 15px;
            padding-left: 47px;
        }
        .title-txt .icon-area {
            position: absolute;
            left: 0;
            display: inline-block;
            width: 36px;
            height: 36px;
            text-align: center;
            border-radius: 50%;
            background: #7c0000;
        }
        .title-txt .icon-area .fa {
            position: relative;
            top: -3px;
            color: #fff;
            font-size: 19px;
        }
        .sentence-view {
            padding: 10px;
            border: 1px solid #ddd;
            margin: 10px auto;
            background: #fafafa;
        }
        .btn-area {
            display: inline-block;
            width: 100%;
            margin-top: 10px;
            font-size: 0px;
        }
        .btn-lg {
            height: 60px;
            font-size: 20px;
            line-height: 38px;
            padding: 10px 35px;
            border-radius: 0px;
        }
        .cont-group {
            padding: 50px 0 50px;
            border-top: 1px dotted #ddd;
        }
        .cont-group.visualization-result{
            display: none;
        }
        .code-area {
            width: 100%;
            min-height: 100px;
            padding: 10px 25px;
            margin-bottom: 25px;
            border: 1px solid #ddd;
            background-color: #fafafa;
        }
    </style>
{% endblock %}

{% block content %}
    <h3><b>Sumalyze 결과</b></h3>
    <p>목차와 요약, 분석이 포함되어야 함</p>
    <hr>
    <h5>< 목 차 ></h5>
    <ol class="content-nav">
        <li><a href="#content1">서론</a></li>
        <li><a href="#content2">본론</a></li>
        <li><a href="#content3">결론</a></li>
    </ol>
    <h5>< 요 약 ></h5>
    <p>ㅇㄹㅇㄹdfsdfjsldfjijefijelfjlgkjlkfjlskdjflsdjfsjdf</p>
    <div id="content1" class="contents">1. 서론
        <p>
                최근 자연어처리 관련 연구가 활발해지면서 다양한 오픈소스 라이브러리와 패키지가 공개되고 있다. 대표적으로 한국 정보처리를 위한 파이썬 패키지인 'KoNLPy'[1] 가 있다. 이 패키지는 입력된 문장의 형태소를 분석하고 다양한 말뭉치를 제공하고 있다.
                이러한 라이브러리나 패키지를 이용해 정보 요약을 제공하는 대다수의 제품들은 텍스트 형태만을 기반으로 정보를 처리한다. 하지만 최근 웹상에서 공유되는 정보들은 ‘텍스트’ 뿐만 아니라 PDF, 이미지, 음성, 동영상과 같은 다양한 형태와 확장자를 가지고 있어, 이에 대한 요약과 학습을 원하는 사용자가 늘어나고 있다. 
                본 논문에서는 이런 관점에서 자연어(Natural Language)를 기반으로 정보를 분석해 범주화하고 이를 새로운 콘텐츠로 다시 생산해 내는 방식을 제안한다. 이 방식을 통해 요약의 결과 또한 자신이 원하는 양식으로 변환해서 제공하고 키워드를 제시하며 사용자의 학습이 용이하게 돕는다. 
        </p>
    </div><br>
    <div id="content2" class="contents">2. 본론
        <p>
                “Sumalyze”는 기존 요약 서비스들의 한계를 보완한 파이썬 언어 기반의 라이브러리이다. Sumalyze는 다음 요구에 의해 개발되었다.
                다양한 데이터형식 지원, 기존의 요약 서비스들은 오직 텍스트만 지원하고 자사 프로그램 내에서의 컨텐츠만 요약이 가능하도록 되어있었다. Sumalyze은 사용자 업로드 방식의 라이브러리로서 텍스트뿐만 아니라 영상, 음성, PDF, 이미지의 형식을 지원한다.
                컨텐츠 종류에 맞는 요약, 단순히 텍스트의 분량을 줄이는 형식의 요약이 아닌 컨텐츠의 종류에 맞게 요약을 제공한다. 컨텐츠 종류는 소논문, 강의, 연설, 기사, 프로그램요구서, 학습서가 있다.
                컨텐츠의 명확한 이해를 위한 범주화, 텍스트의 문단에서 핵심 문장을 추출해 컨텐츠 내용을 아우르는 목차를 생성한다. 이로써 사용자는 컨텐츠 내용의 큰 틀을 파악할 수 있다.
                요약에 대한 분석 제공, 컨텐츠 요약 후 각 문단 속 문장들의 중요도를 수치화한 데이터, 빈도수가 높은 키워드와 전체 내용을 아우르는 중요개념(핵심주제)를 추출해내 
               요약된 컨텐츠의 내용의 핵심파악을 쉽도록 만든다.
               또한 본 Sumalyze의 소스는 오픈소스로 제공되어 사용자가 원하는 방식으로 수정하여 사용할 수 있게 하였다.
        </p>
    </div><br>
    <div id="content3" class="contents">3. 결론
        <p>
                정보화 시대, 데이터의 공유가 빠르게 이루어지며 더 이상 가지고 있는 데이터의 양은 중요하지 않게 되었다. 이제는 방대한 양의 데이터를 어떻게 효율적으로 학습할 수 있는지가 관건이다. 이러한 이유로 요약 기술에 관심도가 높아지고 있고, 수많은 요약 프로그램이 개발되어 교육 분야에 다양하게 활용되고 있다.
                이러한 관점에서, 사용자의 편의에 맞게 요약과 분석을 제공하는 Sumalyze 또한 좋은 교육 프로그램에 활용될 수 있을 것이다.
        </p>
    </div>
    <br><br><br>


    <div class="question-part">
        <div class="cont-group">
            <div class="title-txt">
                <span class="icon-area">
                    <i class="fa fa-pencil-alt" aria-hidden="true"></i>
                </span>위키백과 Q&amp;A
            </div>
            <div class="desc-txt">
                질문의도를 파악하여 위키피디아 사전에서 정답을 찾아 드립니다.
            </div>
            <form name="insert" method="post" action=" ">
                <div class="sentence-view">
                    <textarea class="form-control" rows="4" name="question" id="question" placeholder="질문을 입력해 주세요."></textarea>
                </div>
                <div class="btn-area text-center">
                    <button type="button" class="btn btn-primary btn-lg" onclick="insert_action();">분석하기</button>
                </div>
            </form>
        </div>
        <div class="cont-group visualization-result" style="">
            <div class="group-header">
                <div class="title-txt"><span class="icon-area"><i class="fa fa-search" aria-hidden="true"></i></span>분석 결과보기</div>
            </div>
            <div class="group-body">
                <div class="code-area">
                    <div id="result_page"></div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block extra-body %}
    <script>
        var result_string;
        function insert_action(){
            var mForm = document.insert; // form의 값을 가져오기 위함
    
            var inObj = new Object();
            inObj.type = "ENGINE_TYPE";
            inObj.question = mForm.question.value;
            
            var obj = new Object(); // JSON형식으로 변환 할 오브젝트
            obj.request_id = "reserved field";
            obj.access_key = "66f3c343-8811-466b-88d7-2159b70b9975";
            obj.argument = inObj;        
            
            console.log(obj);
            var json_data = JSON.stringify(obj); // form의 값을 넣은 오브젝트를 JSON형식으로 변환    
            var update_data;        
            var request = $.ajax({
                url:"http://aiopen.etri.re.kr:8000/WikiQA",
                type:"POST",
                data:json_data, // {“user_id”:”입력값”, “user_password”:”입력값”} 형식으로 전달 됨
                dataType:"json",
                success : function(data){
                    $('.cont-group.visualization-result').show();
                    update_data = data.return_object.WiKiInfo.AnswerInfo[0].answer;
                    result_string = JSON.stringify(update_data);                
                    $("#result_page").text(result_string);         
                }
            });
            request.done(function(data){ // 전송 후, 결과 값 받아오는 부분
            
            });
            request.fail(function(jqXHR, textStatus){ // 에러 발생
            alert("등록 오류 발생!");
            });
        }
        
        /*$(document).ready(function () {
            $(".cont-group.visualization-result").each(function(index, item){
                $(item).hide();
            });
            $(".cont-group.result").each(function(index, item){
                $(item).hide();
            });
        });*/


        /*var $contentNav = $('.content-nav li');
        var $contents = $('.contents');
        var activeClass = 'active';
        
        $contentNav.parent().find(':first').addClass(activeClass).show();
        $contents.not(':first').hide();
        $contentNav.find('a').on('click', function(){
            $contentNav.removeClass(activeClass);
            $(this).parent().addClass(activeClass);
            $contents.hide();
            $($(this).attr('href')).show();
            return false;
        });*/
    </script>
{% endblock %}
